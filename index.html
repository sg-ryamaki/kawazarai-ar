<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>富士山の水 AR</title>

<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<script>
AFRAME.registerComponent('waterflow', {
 init: function () {

  for (let i=0;i<25;i++){

    const drop=document.createElement('a-sphere');
    drop.setAttribute('radius','0.03');
    drop.setAttribute('color','#8ED6FF');
    drop.setAttribute('position','0 1 0');

    drop.setAttribute('animation',
      'property: position; to: 0 0.1 0.8; dur:2000; loop:true');

    this.el.appendChild(drop);
  }
 }
});
</script>

<style>
body{margin:0;overflow:hidden;}
</style>
</head>

<body>

<a-scene
 embedded
 vr-mode-ui="enabled:false"
 renderer="precision: medium;"
 arjs="sourceType:webcam;debugUIEnabled:false;"
>

<a-marker preset="hiro">

<!-- 富士山 -->
<a-cone position="0 0.6 0"
radius-bottom="0.7"
height="1.2"
color="#3E5B4F">
</a-cone>

<!-- 雪 -->
<a-cone position="0 1.1 0"
radius-bottom="0.25"
height="0.35"
color="white">
</a-cone>

<!-- 川 -->
<a-plane
position="0 0.05 0.8"
width="1.5"
height="0.5"
color="#2196F3"
opacity="0.6">
</a-plane>

<!-- 水 -->
<a-entity waterflow></a-entity>

</a-marker>

<a-entity camera></a-entity>

</a-scene>
</body>
</html>
