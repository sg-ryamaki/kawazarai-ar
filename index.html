<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>水龍神AR（見え方修正版）</title>

  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <style>
    body{ margin:0; overflow:hidden; font-family:system-ui,-apple-system,"Segoe UI",sans-serif; }
    .ui{
      position:fixed; top:12px; left:12px; right:12px;
      background:rgba(0,0,0,.55); color:#fff; padding:10px 12px;
      border-radius:12px; z-index:10; line-height:1.4;
    }
    .ui b{ font-weight:800; }
  </style>

  <script>
    // 常にカメラの方を向く（ビルボード）
    AFRAME.registerComponent('look-at-camera', {
      tick: function () {
        const cam = document.querySelector('[camera]');
        if (!cam) return;
        this.el.object3D.lookAt(cam.object3D.getWorldPosition(new THREE.Vector3()));
      }
    });
  </script>
</head>

<body>
  <div class="ui">
    <b>修正：</b> コンテンツを常にカメラ正面に向けています（壁貼り対応）。<br/>
    水龍神が“帯”にならず、正面に表示されます。
  </div>

  <a-scene embedded vr-mode-ui="enabled:false"
           renderer="precision: medium; antialias: true;"
           arjs="sourceType: webcam; debugUIEnabled: false;">

    <a-assets>
      <img id="dragonImg" src="dragon.png" />
    </a-assets>

    <a-marker preset="hiro">
      <!-- ライト（神秘感） -->
      <a-entity light="type:ambient; intensity:1.0; color:#ffffff"></a-entity>
      <a-entity light="type:point; intensity:1.6; distance:8; color:#aee8ff" position="0 1.2 1.2"></a-entity>

      <!-- ★ここが重要：壁貼りでも必ず正面になる -->
      <!-- 近すぎると歪むので、zを少し前(0.6〜1.0)に -->
      <a-entity id="content" look-at-camera position="0 1.0 0.9" scale="1 1 1">

        <!-- 水龍神（両面表示 + 少し小さめ） -->
        <a-plane
          width="1.6" height="1.6"
          material="src:#dragonImg; transparent:true; opacity:1; side:double;">
        </a-plane>

        <!-- メッセージ（※以前テキスト相性があったのでPNG推奨。まずは表示だけ） -->
        <!-- 文字を確実に出したいなら msg1.png / msg2.png を作って貼る方式が鉄板です -->
        <a-plane position="0 -1.05 0.01" width="1.6" height="0.35"
          material="color:#000; transparent:true; opacity:0.35; side:double;"></a-plane>

        <!-- 文字は PNG 推奨：とりあえず ar_thanks.png があるなら差し替えて使えます -->
        <a-plane position="0 -1.05 0.02" width="1.55" height="0.33"
          material="src: ar_thanks.png; transparent:true; opacity:1; side:double;">
        </a-plane>

      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
